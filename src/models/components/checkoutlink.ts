/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import {
  CheckoutLinkProduct,
  CheckoutLinkProduct$inboundSchema,
  CheckoutLinkProduct$Outbound,
  CheckoutLinkProduct$outboundSchema,
} from "./checkoutlinkproduct.js";
import {
  DiscountFixedOnceForeverDurationBase,
  DiscountFixedOnceForeverDurationBase$inboundSchema,
  DiscountFixedOnceForeverDurationBase$Outbound,
  DiscountFixedOnceForeverDurationBase$outboundSchema,
} from "./discountfixedonceforeverdurationbase.js";
import {
  DiscountFixedRepeatDurationBase,
  DiscountFixedRepeatDurationBase$inboundSchema,
  DiscountFixedRepeatDurationBase$Outbound,
  DiscountFixedRepeatDurationBase$outboundSchema,
} from "./discountfixedrepeatdurationbase.js";
import {
  DiscountPercentageOnceForeverDurationBase,
  DiscountPercentageOnceForeverDurationBase$inboundSchema,
  DiscountPercentageOnceForeverDurationBase$Outbound,
  DiscountPercentageOnceForeverDurationBase$outboundSchema,
} from "./discountpercentageonceforeverdurationbase.js";
import {
  DiscountPercentageRepeatDurationBase,
  DiscountPercentageRepeatDurationBase$inboundSchema,
  DiscountPercentageRepeatDurationBase$Outbound,
  DiscountPercentageRepeatDurationBase$outboundSchema,
} from "./discountpercentagerepeatdurationbase.js";
import {
  LegacyRecurringProductPrice,
  LegacyRecurringProductPrice$inboundSchema,
  LegacyRecurringProductPrice$Outbound,
  LegacyRecurringProductPrice$outboundSchema,
} from "./legacyrecurringproductprice.js";
import {
  PaymentProcessor,
  PaymentProcessor$inboundSchema,
  PaymentProcessor$outboundSchema,
} from "./paymentprocessor.js";
import {
  ProductPrice,
  ProductPrice$inboundSchema,
  ProductPrice$Outbound,
  ProductPrice$outboundSchema,
} from "./productprice.js";

export type CheckoutLinkMetadata = string | number | boolean;

export type CheckoutLinkDiscount =
  | DiscountPercentageOnceForeverDurationBase
  | DiscountFixedOnceForeverDurationBase
  | DiscountPercentageRepeatDurationBase
  | DiscountFixedRepeatDurationBase;

/**
 * @deprecated class: This will be removed in a future release, please migrate away from it as soon as possible.
 */
export type CheckoutLinkProductPrice =
  | LegacyRecurringProductPrice
  | ProductPrice;

/**
 * Checkout link data.
 */
export type CheckoutLink = {
  /**
   * Creation timestamp of the object.
   */
  createdAt: Date;
  /**
   * Last modification timestamp of the object.
   */
  modifiedAt: Date | null;
  /**
   * The ID of the object.
   */
  id: string;
  metadata: { [k: string]: string | number | boolean };
  paymentProcessor: PaymentProcessor;
  /**
   * Client secret used to access the checkout link.
   */
  clientSecret: string;
  /**
   * URL where the customer will be redirected after a successful payment.
   */
  successUrl: string | null;
  /**
   * Optional label to distinguish links internally
   */
  label: string | null;
  /**
   * Whether to allow the customer to apply discount codes. If you apply a discount through `discount_id`, it'll still be applied, but the customer won't be able to change it.
   */
  allowDiscountCodes: boolean;
  /**
   * ID of the discount to apply to the checkout. If the discount is not applicable anymore when opening the checkout link, it'll be ignored.
   */
  discountId: string | null;
  /**
   * The organization ID.
   */
  organizationId: string;
  products: Array<CheckoutLinkProduct>;
  discount:
    | DiscountPercentageOnceForeverDurationBase
    | DiscountFixedOnceForeverDurationBase
    | DiscountPercentageRepeatDurationBase
    | DiscountFixedRepeatDurationBase
    | null;
  /**
   * @deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  productId: string;
  /**
   * @deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  productPriceId: string;
  /**
   * Product data for a checkout link.
   */
  product: CheckoutLinkProduct;
  /**
   * @deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  productPrice: LegacyRecurringProductPrice | ProductPrice;
  url: string;
};

/** @internal */
export const CheckoutLinkMetadata$inboundSchema: z.ZodType<
  CheckoutLinkMetadata,
  z.ZodTypeDef,
  unknown
> = z.union([z.string(), z.number().int(), z.boolean()]);

/** @internal */
export type CheckoutLinkMetadata$Outbound = string | number | boolean;

/** @internal */
export const CheckoutLinkMetadata$outboundSchema: z.ZodType<
  CheckoutLinkMetadata$Outbound,
  z.ZodTypeDef,
  CheckoutLinkMetadata
> = z.union([z.string(), z.number().int(), z.boolean()]);

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace CheckoutLinkMetadata$ {
  /** @deprecated use `CheckoutLinkMetadata$inboundSchema` instead. */
  export const inboundSchema = CheckoutLinkMetadata$inboundSchema;
  /** @deprecated use `CheckoutLinkMetadata$outboundSchema` instead. */
  export const outboundSchema = CheckoutLinkMetadata$outboundSchema;
  /** @deprecated use `CheckoutLinkMetadata$Outbound` instead. */
  export type Outbound = CheckoutLinkMetadata$Outbound;
}

export function checkoutLinkMetadataToJSON(
  checkoutLinkMetadata: CheckoutLinkMetadata,
): string {
  return JSON.stringify(
    CheckoutLinkMetadata$outboundSchema.parse(checkoutLinkMetadata),
  );
}

export function checkoutLinkMetadataFromJSON(
  jsonString: string,
): SafeParseResult<CheckoutLinkMetadata, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CheckoutLinkMetadata$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CheckoutLinkMetadata' from JSON`,
  );
}

/** @internal */
export const CheckoutLinkDiscount$inboundSchema: z.ZodType<
  CheckoutLinkDiscount,
  z.ZodTypeDef,
  unknown
> = z.union([
  DiscountPercentageOnceForeverDurationBase$inboundSchema,
  DiscountFixedOnceForeverDurationBase$inboundSchema,
  DiscountPercentageRepeatDurationBase$inboundSchema,
  DiscountFixedRepeatDurationBase$inboundSchema,
]);

/** @internal */
export type CheckoutLinkDiscount$Outbound =
  | DiscountPercentageOnceForeverDurationBase$Outbound
  | DiscountFixedOnceForeverDurationBase$Outbound
  | DiscountPercentageRepeatDurationBase$Outbound
  | DiscountFixedRepeatDurationBase$Outbound;

/** @internal */
export const CheckoutLinkDiscount$outboundSchema: z.ZodType<
  CheckoutLinkDiscount$Outbound,
  z.ZodTypeDef,
  CheckoutLinkDiscount
> = z.union([
  DiscountPercentageOnceForeverDurationBase$outboundSchema,
  DiscountFixedOnceForeverDurationBase$outboundSchema,
  DiscountPercentageRepeatDurationBase$outboundSchema,
  DiscountFixedRepeatDurationBase$outboundSchema,
]);

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace CheckoutLinkDiscount$ {
  /** @deprecated use `CheckoutLinkDiscount$inboundSchema` instead. */
  export const inboundSchema = CheckoutLinkDiscount$inboundSchema;
  /** @deprecated use `CheckoutLinkDiscount$outboundSchema` instead. */
  export const outboundSchema = CheckoutLinkDiscount$outboundSchema;
  /** @deprecated use `CheckoutLinkDiscount$Outbound` instead. */
  export type Outbound = CheckoutLinkDiscount$Outbound;
}

export function checkoutLinkDiscountToJSON(
  checkoutLinkDiscount: CheckoutLinkDiscount,
): string {
  return JSON.stringify(
    CheckoutLinkDiscount$outboundSchema.parse(checkoutLinkDiscount),
  );
}

export function checkoutLinkDiscountFromJSON(
  jsonString: string,
): SafeParseResult<CheckoutLinkDiscount, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CheckoutLinkDiscount$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CheckoutLinkDiscount' from JSON`,
  );
}

/** @internal */
export const CheckoutLinkProductPrice$inboundSchema: z.ZodType<
  CheckoutLinkProductPrice,
  z.ZodTypeDef,
  unknown
> = z.union([
  LegacyRecurringProductPrice$inboundSchema,
  ProductPrice$inboundSchema,
]);

/** @internal */
export type CheckoutLinkProductPrice$Outbound =
  | LegacyRecurringProductPrice$Outbound
  | ProductPrice$Outbound;

/** @internal */
export const CheckoutLinkProductPrice$outboundSchema: z.ZodType<
  CheckoutLinkProductPrice$Outbound,
  z.ZodTypeDef,
  CheckoutLinkProductPrice
> = z.union([
  LegacyRecurringProductPrice$outboundSchema,
  ProductPrice$outboundSchema,
]);

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace CheckoutLinkProductPrice$ {
  /** @deprecated use `CheckoutLinkProductPrice$inboundSchema` instead. */
  export const inboundSchema = CheckoutLinkProductPrice$inboundSchema;
  /** @deprecated use `CheckoutLinkProductPrice$outboundSchema` instead. */
  export const outboundSchema = CheckoutLinkProductPrice$outboundSchema;
  /** @deprecated use `CheckoutLinkProductPrice$Outbound` instead. */
  export type Outbound = CheckoutLinkProductPrice$Outbound;
}

export function checkoutLinkProductPriceToJSON(
  checkoutLinkProductPrice: CheckoutLinkProductPrice,
): string {
  return JSON.stringify(
    CheckoutLinkProductPrice$outboundSchema.parse(checkoutLinkProductPrice),
  );
}

export function checkoutLinkProductPriceFromJSON(
  jsonString: string,
): SafeParseResult<CheckoutLinkProductPrice, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CheckoutLinkProductPrice$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CheckoutLinkProductPrice' from JSON`,
  );
}

/** @internal */
export const CheckoutLink$inboundSchema: z.ZodType<
  CheckoutLink,
  z.ZodTypeDef,
  unknown
> = z.object({
  created_at: z.string().datetime({ offset: true }).transform(v => new Date(v)),
  modified_at: z.nullable(
    z.string().datetime({ offset: true }).transform(v => new Date(v)),
  ),
  id: z.string(),
  metadata: z.record(z.union([z.string(), z.number().int(), z.boolean()])),
  payment_processor: PaymentProcessor$inboundSchema,
  client_secret: z.string(),
  success_url: z.nullable(z.string()),
  label: z.nullable(z.string()),
  allow_discount_codes: z.boolean(),
  discount_id: z.nullable(z.string()),
  organization_id: z.string(),
  products: z.array(CheckoutLinkProduct$inboundSchema),
  discount: z.nullable(
    z.union([
      DiscountPercentageOnceForeverDurationBase$inboundSchema,
      DiscountFixedOnceForeverDurationBase$inboundSchema,
      DiscountPercentageRepeatDurationBase$inboundSchema,
      DiscountFixedRepeatDurationBase$inboundSchema,
    ]),
  ),
  product_id: z.string(),
  product_price_id: z.string(),
  product: CheckoutLinkProduct$inboundSchema,
  product_price: z.union([
    LegacyRecurringProductPrice$inboundSchema,
    ProductPrice$inboundSchema,
  ]),
  url: z.string(),
}).transform((v) => {
  return remap$(v, {
    "created_at": "createdAt",
    "modified_at": "modifiedAt",
    "payment_processor": "paymentProcessor",
    "client_secret": "clientSecret",
    "success_url": "successUrl",
    "allow_discount_codes": "allowDiscountCodes",
    "discount_id": "discountId",
    "organization_id": "organizationId",
    "product_id": "productId",
    "product_price_id": "productPriceId",
    "product_price": "productPrice",
  });
});

/** @internal */
export type CheckoutLink$Outbound = {
  created_at: string;
  modified_at: string | null;
  id: string;
  metadata: { [k: string]: string | number | boolean };
  payment_processor: string;
  client_secret: string;
  success_url: string | null;
  label: string | null;
  allow_discount_codes: boolean;
  discount_id: string | null;
  organization_id: string;
  products: Array<CheckoutLinkProduct$Outbound>;
  discount:
    | DiscountPercentageOnceForeverDurationBase$Outbound
    | DiscountFixedOnceForeverDurationBase$Outbound
    | DiscountPercentageRepeatDurationBase$Outbound
    | DiscountFixedRepeatDurationBase$Outbound
    | null;
  product_id: string;
  product_price_id: string;
  product: CheckoutLinkProduct$Outbound;
  product_price: LegacyRecurringProductPrice$Outbound | ProductPrice$Outbound;
  url: string;
};

/** @internal */
export const CheckoutLink$outboundSchema: z.ZodType<
  CheckoutLink$Outbound,
  z.ZodTypeDef,
  CheckoutLink
> = z.object({
  createdAt: z.date().transform(v => v.toISOString()),
  modifiedAt: z.nullable(z.date().transform(v => v.toISOString())),
  id: z.string(),
  metadata: z.record(z.union([z.string(), z.number().int(), z.boolean()])),
  paymentProcessor: PaymentProcessor$outboundSchema,
  clientSecret: z.string(),
  successUrl: z.nullable(z.string()),
  label: z.nullable(z.string()),
  allowDiscountCodes: z.boolean(),
  discountId: z.nullable(z.string()),
  organizationId: z.string(),
  products: z.array(CheckoutLinkProduct$outboundSchema),
  discount: z.nullable(
    z.union([
      DiscountPercentageOnceForeverDurationBase$outboundSchema,
      DiscountFixedOnceForeverDurationBase$outboundSchema,
      DiscountPercentageRepeatDurationBase$outboundSchema,
      DiscountFixedRepeatDurationBase$outboundSchema,
    ]),
  ),
  productId: z.string(),
  productPriceId: z.string(),
  product: CheckoutLinkProduct$outboundSchema,
  productPrice: z.union([
    LegacyRecurringProductPrice$outboundSchema,
    ProductPrice$outboundSchema,
  ]),
  url: z.string(),
}).transform((v) => {
  return remap$(v, {
    createdAt: "created_at",
    modifiedAt: "modified_at",
    paymentProcessor: "payment_processor",
    clientSecret: "client_secret",
    successUrl: "success_url",
    allowDiscountCodes: "allow_discount_codes",
    discountId: "discount_id",
    organizationId: "organization_id",
    productId: "product_id",
    productPriceId: "product_price_id",
    productPrice: "product_price",
  });
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace CheckoutLink$ {
  /** @deprecated use `CheckoutLink$inboundSchema` instead. */
  export const inboundSchema = CheckoutLink$inboundSchema;
  /** @deprecated use `CheckoutLink$outboundSchema` instead. */
  export const outboundSchema = CheckoutLink$outboundSchema;
  /** @deprecated use `CheckoutLink$Outbound` instead. */
  export type Outbound = CheckoutLink$Outbound;
}

export function checkoutLinkToJSON(checkoutLink: CheckoutLink): string {
  return JSON.stringify(CheckoutLink$outboundSchema.parse(checkoutLink));
}

export function checkoutLinkFromJSON(
  jsonString: string,
): SafeParseResult<CheckoutLink, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CheckoutLink$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CheckoutLink' from JSON`,
  );
}
